{
  "name": "Value-changing-monitor",
  "tagline": "API service which notify you that some monitoring value changed.",
  "body": "# Value Changing Monitor\r\n\r\nThis is an API which get you know some value changes. Implemented with [Serverless](https://github.com/serverless/serverless)\r\n\r\nFor example, you can watch registration count of some service, a product price, temparature, .etc.  Anything which has value can be monitored.\r\n\r\n\r\n# Usage\r\n\r\n1. Create your resource that is to be monitored. Define initial value and Slack webhook info for receive notifications.\r\n2. Just only PUT a value continuously. \r\n\r\n\r\n## Create a resource\r\n\r\n### Request\r\n\r\nPOST a JSON to create a resource.  \r\n\r\n#### URL\r\n\r\n**https://monitor.ecp.plus/resources**\r\n\r\n#### Body\r\n\r\nJSON schema is following.\r\n\r\n```json\r\n{\r\n  \"name\": \"TEST\",\r\n  \"initialValue\": 0,\r\n  \"slack\": {\r\n    \"url\": \"https://hooks.slack.com/services/AAAA/1111/qwerty\",\r\n    \"channel\": \"#value_test\",\r\n    \"template\": \"Users count is {value}\",\r\n    \"icon_emoji\": \":smile:\"\r\n  }\r\n}\r\n```\r\n\r\nAll fields except `slack.icon_emoji` are required.\r\n\r\n`template`.  It includes a special placeholder `{value}`.  When posting a notification, the `{value}` will be replaced to the actual value.\r\n\r\n#### cURL example\r\n\r\n```sh\r\ncurl https://monitor.ecp.plus/resources -X POST -d \"{name: 'Registration count', initialValue: 0, slack: {url: 'https://hooks.slack.com/services/1111/AAAA/qwerty', channel: '#value_changing_test', template: 'Awesome value is {value}'\r\n, icon_emoji: ':smile:'}}\"\r\n```\r\n\r\n### Response\r\n\r\n```json\r\n{\r\n  \"uuid\": \"f0d675cf-b8dc-46c9-9536-23ab358d2817\",\r\n  \"name\": \"Registration count\",\r\n  \"value\": 0\r\n}\r\n```\r\n\r\n**Please keep the `uuid`.**  \r\nYou will use `uuid` to PUT values.\r\n\r\n\r\n## Put a value\r\n\r\nIf PUT value is different from previous value, you will receive a Slack notification.\r\n\r\n### Request\r\n\r\n#### URL\r\n\r\n**https://monitor.ecp.plus/resources/{uuid}**\r\n\r\n`{uuid}` is that you got when creating.\r\n\r\n#### Body\r\n\r\nPUT only a value.\r\n\r\n```javascript\r\n{\r\n  \"value\": 100\r\n}\r\n```\r\n\r\n#### cURL example\r\n\r\n```sh\r\ncurl https://monitor.ecp.plus/resources/f0d675cf-b8dc-46c9-9536-23ab358d2817 -X PUT -d \"{value: 100}\"\r\n```\r\n### Response\r\n\r\nIf the value has changed.\r\n\r\n```json\r\n{\r\n  \"result\": \"changed\"\r\n}\r\n```\r\n\r\nIf the value hasn't changed.\r\n\r\n\r\n```json\r\n{\r\n  \"result\": \"not changed\"\r\n}\r\n```",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}